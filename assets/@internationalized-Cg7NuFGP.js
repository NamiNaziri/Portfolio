import{_ as F}from"./@swc-h1AXYk7E.js";function g(e,r){return e-r*Math.floor(e/r)}const J=1721426;function u(e,r,n,t){r=v(e,r);let a=r-1,o=-2;return n<=2?o=0:y(r)&&(o=-1),J-1+365*a+Math.floor(a/4)-Math.floor(a/100)+Math.floor(a/400)+Math.floor((367*n-362)/12+o+t)}function y(e){return e%4===0&&(e%100!==0||e%400===0)}function v(e,r){return e==="BC"?1-r:r}function Z(e){let r="AD";return e<=0&&(r="BC",e=1-e),[r,e]}const _={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class M{fromJulianDay(r){let n=r,t=n-J,a=Math.floor(t/146097),o=g(t,146097),c=Math.floor(o/36524),i=g(o,36524),l=Math.floor(i/1461),p=g(i,1461),S=Math.floor(p/365),K=a*400+c*100+l*4+S+(c!==4&&S!==4?1:0),[f,s]=Z(K),Q=n-u(f,s,1,1),w=2;n<u(f,s,3,1)?w=0:y(s)&&(w=1);let E=Math.floor(((Q+w)*12+373)/367),X=n-u(f,s,E,1)+1;return new m(f,s,E,X)}toJulianDay(r){return u(r.era,r.year,r.month,r.day)}getDaysInMonth(r){return _[y(r.year)?"leapyear":"standard"][r.month-1]}getMonthsInYear(r){return 12}getDaysInYear(r){return y(r.year)?366:365}getYearsInEra(r){return 9999}getEras(){return["BC","AD"]}isInverseEra(r){return r.era==="BC"}balanceDate(r){r.year<=0&&(r.era=r.era==="BC"?"AD":"BC",r.year=1-r.year)}constructor(){this.identifier="gregory"}}function P(e,r){return e.calendar.toJulianDay(e)-r.calendar.toJulianDay(r)}function ee(e,r){return C(e)-C(r)}function C(e){return e.hour*36e5+e.minute*6e4+e.second*1e3+e.millisecond}let D=null;function j(){return D==null&&(D=new Intl.DateTimeFormat().resolvedOptions().timeZone),D}function k(e){e=Y(e,new M);let r=v(e.era,e.year);return O(r,e.month,e.day,e.hour,e.minute,e.second,e.millisecond)}function O(e,r,n,t,a,o,c){let i=new Date;return i.setUTCHours(t,a,o,c),i.setUTCFullYear(e,r-1,n),i.getTime()}function B(e,r){if(r==="UTC")return 0;if(e>0&&r===j())return new Date(e).getTimezoneOffset()*-6e4;let{year:n,month:t,day:a,hour:o,minute:c,second:i}=q(e,r);return O(n,t,a,o,c,i,0)-Math.floor(e/1e3)*1e3}const A=new Map;function q(e,r){let n=A.get(r);n||(n=new Intl.DateTimeFormat("en-US",{timeZone:r,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),A.set(r,n));let t=n.formatToParts(new Date(e)),a={};for(let o of t)o.type!=="literal"&&(a[o.type]=o.value);return{year:a.era==="BC"||a.era==="B"?-a.year+1:+a.year,month:+a.month,day:+a.day,hour:a.hour==="24"?0:+a.hour,minute:+a.minute,second:+a.second}}const U=864e5;function re(e,r,n,t){return(n===t?[n]:[n,t]).filter(o=>ne(e,r,o))}function ne(e,r,n){let t=q(n,r);return e.year===t.year&&e.month===t.month&&e.day===t.day&&e.hour===t.hour&&e.minute===t.minute&&e.second===t.second}function te(e,r,n="compatible"){let t=W(e);if(r==="UTC")return k(t);if(r===j()&&n==="compatible"){t=Y(t,new M);let l=new Date,p=v(t.era,t.year);return l.setFullYear(p,t.month-1,t.day),l.setHours(t.hour,t.minute,t.second,t.millisecond),l.getTime()}let a=k(t),o=B(a-U,r),c=B(a+U,r),i=re(t,r,a-o,a-c);if(i.length===1)return i[0];if(i.length>1)switch(n){case"compatible":case"earlier":return i[0];case"later":return i[i.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(n){case"earlier":return Math.min(a-o,a-c);case"compatible":case"later":return Math.max(a-o,a-c);case"reject":throw new RangeError("No such absolute time found")}}function V(e,r,n="compatible"){return new Date(te(e,r,n))}function W(e,r){let n=0,t=0,a=0,o=0;if("timeZone"in e)({hour:n,minute:t,second:a,millisecond:o}=e);else if("hour"in e&&!r)return e;return r&&({hour:n,minute:t,second:a,millisecond:o}=r),new b(e.calendar,e.era,e.year,e.month,e.day,n,t,a,o)}function Y(e,r){if(e.calendar.identifier===r.identifier)return e;let n=r.fromJulianDay(e.calendar.toJulianDay(e)),t=e.copy();return t.calendar=r,t.era=n.era,t.year=n.year,t.month=n.month,t.day=n.day,d(t),t}function T(e,r){let n=e.copy(),t="hour"in n?he(n,r):0;x(n,r.years||0),n.calendar.balanceYearMonth&&n.calendar.balanceYearMonth(n,e),n.month+=r.months||0,I(n),H(n),n.day+=(r.weeks||0)*7,n.day+=r.days||0,n.day+=t,ae(n),n.calendar.balanceDate&&n.calendar.balanceDate(n),n.year<1&&(n.year=1,n.month=1,n.day=1);let a=n.calendar.getYearsInEra(n);if(n.year>a){var o,c;let l=(o=(c=n.calendar).isInverseEra)===null||o===void 0?void 0:o.call(c,n);n.year=a,n.month=l?1:n.calendar.getMonthsInYear(n),n.day=l?1:n.calendar.getDaysInMonth(n)}n.month<1&&(n.month=1,n.day=1);let i=n.calendar.getMonthsInYear(n);return n.month>i&&(n.month=i,n.day=n.calendar.getDaysInMonth(n)),n.day=Math.max(1,Math.min(n.calendar.getDaysInMonth(n),n.day)),n}function x(e,r){var n,t;!((n=(t=e.calendar).isInverseEra)===null||n===void 0)&&n.call(t,e)&&(r=-r),e.year+=r}function I(e){for(;e.month<1;)x(e,-1),e.month+=e.calendar.getMonthsInYear(e);let r=0;for(;e.month>(r=e.calendar.getMonthsInYear(e));)e.month-=r,x(e,1)}function ae(e){for(;e.day<1;)e.month--,I(e),e.day+=e.calendar.getDaysInMonth(e);for(;e.day>e.calendar.getDaysInMonth(e);)e.day-=e.calendar.getDaysInMonth(e),e.month++,I(e)}function H(e){e.month=Math.max(1,Math.min(e.calendar.getMonthsInYear(e),e.month)),e.day=Math.max(1,Math.min(e.calendar.getDaysInMonth(e),e.day))}function d(e){e.calendar.constrainDate&&e.calendar.constrainDate(e),e.year=Math.max(1,Math.min(e.calendar.getYearsInEra(e),e.year)),H(e)}function oe(e){let r={};for(let n in e)typeof e[n]=="number"&&(r[n]=-e[n]);return r}function L(e,r){return T(e,oe(r))}function N(e,r){let n=e.copy();return r.era!=null&&(n.era=r.era),r.year!=null&&(n.year=r.year),r.month!=null&&(n.month=r.month),r.day!=null&&(n.day=r.day),d(n),n}function ce(e,r){let n=e.copy();return r.hour!=null&&(n.hour=r.hour),r.minute!=null&&(n.minute=r.minute),r.second!=null&&(n.second=r.second),r.millisecond!=null&&(n.millisecond=r.millisecond),le(n),n}function ie(e){e.second+=Math.floor(e.millisecond/1e3),e.millisecond=$(e.millisecond,1e3),e.minute+=Math.floor(e.second/60),e.second=$(e.second,60),e.hour+=Math.floor(e.minute/60),e.minute=$(e.minute,60);let r=Math.floor(e.hour/24);return e.hour=$(e.hour,24),r}function le(e){e.millisecond=Math.max(0,Math.min(e.millisecond,1e3)),e.second=Math.max(0,Math.min(e.second,59)),e.minute=Math.max(0,Math.min(e.minute,59)),e.hour=Math.max(0,Math.min(e.hour,23))}function $(e,r){let n=e%r;return n<0&&(n+=r),n}function he(e,r){return e.hour+=r.hours||0,e.minute+=r.minutes||0,e.second+=r.seconds||0,e.millisecond+=r.milliseconds||0,ie(e)}function R(e,r,n,t){let a=e.copy();switch(r){case"era":{let i=e.calendar.getEras(),l=i.indexOf(e.era);if(l<0)throw new Error("Invalid era: "+e.era);l=h(l,n,0,i.length-1,t==null?void 0:t.round),a.era=i[l],d(a);break}case"year":var o,c;!((o=(c=a.calendar).isInverseEra)===null||o===void 0)&&o.call(c,a)&&(n=-n),a.year=h(e.year,n,-1/0,9999,t==null?void 0:t.round),a.year===-1/0&&(a.year=1),a.calendar.balanceYearMonth&&a.calendar.balanceYearMonth(a,e);break;case"month":a.month=h(e.month,n,1,e.calendar.getMonthsInYear(e),t==null?void 0:t.round);break;case"day":a.day=h(e.day,n,1,e.calendar.getDaysInMonth(e),t==null?void 0:t.round);break;default:throw new Error("Unsupported field "+r)}return e.calendar.balanceDate&&e.calendar.balanceDate(a),d(a),a}function de(e,r,n,t){let a=e.copy();switch(r){case"hour":{let o=e.hour,c=0,i=23;if((t==null?void 0:t.hourCycle)===12){let l=o>=12;c=l?12:0,i=l?23:11}a.hour=h(o,n,c,i,t==null?void 0:t.round);break}case"minute":a.minute=h(e.minute,n,0,59,t==null?void 0:t.round);break;case"second":a.second=h(e.second,n,0,59,t==null?void 0:t.round);break;case"millisecond":a.millisecond=h(e.millisecond,n,0,999,t==null?void 0:t.round);break;default:throw new Error("Unsupported field "+r)}return a}function h(e,r,n,t,a=!1){if(a){e+=Math.sign(r),e<n&&(e=t);let o=Math.abs(r);r>0?e=Math.ceil(e/o)*o:e=Math.floor(e/o)*o,e>t&&(e=n)}else e+=r,e<n?e=t-(n-e-1):e>t&&(e=n+(e-t-1));return e}function se(e){return`${String(e.hour).padStart(2,"0")}:${String(e.minute).padStart(2,"0")}:${String(e.second).padStart(2,"0")}${e.millisecond?String(e.millisecond/1e3).slice(1):""}`}function z(e){let r=Y(e,new M);return`${String(r.year).padStart(4,"0")}-${String(r.month).padStart(2,"0")}-${String(r.day).padStart(2,"0")}`}function fe(e){return`${z(e)}T${se(e)}`}function G(e){let r=typeof e[0]=="object"?e.shift():new M,n;if(typeof e[0]=="string")n=e.shift();else{let c=r.getEras();n=c[c.length-1]}let t=e.shift(),a=e.shift(),o=e.shift();return[r,n,t,a,o]}var ue=new WeakMap;class m{copy(){return this.era?new m(this.calendar,this.era,this.year,this.month,this.day):new m(this.calendar,this.year,this.month,this.day)}add(r){return T(this,r)}subtract(r){return L(this,r)}set(r){return N(this,r)}cycle(r,n,t){return R(this,r,n,t)}toDate(r){return V(this,r)}toString(){return z(this)}compare(r){return P(this,r)}constructor(...r){F(this,ue,{writable:!0,value:void 0});let[n,t,a,o,c]=G(r);this.calendar=n,this.era=t,this.year=a,this.month=o,this.day=c,d(this)}}var $e=new WeakMap;class b{copy(){return this.era?new b(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new b(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(r){return T(this,r)}subtract(r){return L(this,r)}set(r){return N(ce(this,r),r)}cycle(r,n,t){switch(r){case"era":case"year":case"month":case"day":return R(this,r,n,t);default:return de(this,r,n,t)}}toDate(r,n){return V(this,r,n)}toString(){return fe(this)}compare(r){let n=P(this,r);return n===0?ee(this,W(r)):n}constructor(...r){F(this,$e,{writable:!0,value:void 0});let[n,t,a,o,c]=G(r);this.calendar=n,this.era=t,this.year=a,this.month=o,this.day=c,this.hour=r.shift()||0,this.minute=r.shift()||0,this.second=r.shift()||0,this.millisecond=r.shift()||0,d(this)}}export{m as $};
